\subsection{Compteur}
\label{sec:basic_cnt}
Un des blocs les plus utilisés en VHDL est le compteur. Ils sont très utiles dans plusieurs circonstances. Par exemple : compter des fronts, avoir des bases de temps, compter des événements \dots

Voici la table de vérité d'un simple compteur : 

\begin{table}[ht]
    \centering
    \begin{tabular}{c c c c|c} 
        $arst\_n$ & $clk$ & $srst$ &$en$ & $q$ \\ 
        \hline
        0 & *           & * & * & 0 \\
        1 & \risingedge & 1 & * & 0 \\
        1 & \risingedge & 0 & 1 & $q + 1$ \\
        1 & \risingedge & 0 & 0 & $q$

    \end{tabular}
    \caption{Table de vérité d'un compteur}
    \label{tab:basic_cnt}
\end{table}


- Dessiner sur une feuille l'entité du compteur en se basant sur la table de vérité \ref{tab:basic_cnt}. Pour la sortie \textit{q} specifier \textbf{N} comme taille du vecteur.

\medskip

- Décrire l'entité \textbf{counter} et l'architecture \textbf{rtl\_counter} de cette table de vérité en VHDL en utilisant un \textit{process} et en \textbf{respectant bien la priorité}. Contraindre le vecteur $q$ sur \textbf{8 bits}.

\medskip

- Simuler votre compteur et vérifier que votre implémentation respecte bien la table de vérité.

\medskip

- Ajouter le paramètre générique $N$ qui permettra de choisir la taille du vecteur $q_n$ lorsqu'on instancie ce compteur.

\medskip

- Simuler votre compteur pour $N = 7$. A quelle valeur votre compteur reboucle? Pourquoi?

\subsection{Cascade de compteurs}

On veut faire un compteur qui s’incrémente toutes les secondes. On veut visualiser le contenu de ce compteur sur un afficheur sept segments. Son contenu sera affiché en hexadecimal. Ce compteur devra compter de $0_d$ à $15_d$.

\medskip

- Dessiner sur une feuille l’entité du composant qui a été décrit dans l'énoncé. Ce composant aura pour rôle d'être un composant de top level. Il regroupera toutes les instances ainsi que la logique de la question suivante.

\medskip

- Faire un schéma fonctionnel en faisant apparaître deux compteurs en cascades. \\ 
\textbf{NB: Il est interdit de connecter aux entrées horloges autres que des signaux horloges}.

\medskip

- Implémenter votre schéma fonctionnel en VHDL.

\medskip

- Simuler votre le schéma fonctionnel. Pour éviter de simuler une seconde, faire incrémenter le compteur toutes les millisecondes au lieu de toutes les secondes.

\medskip

- Intégrer un analyseur logique (Signal Tap Logic Analyzer) sur votre FPGA et visualiser le signal \textit{q} des compteurs ainsi que le signal \textit{en} du second compteur.

\medskip

- Compiler et programmer. En utilisant l'analyseur logique, déclencher l'acquisition lorsque \textit{en} vaut $1$. Vérifier que \textit{en} est à $1$ que pendant un seul coup d'horloge.

\medskip

- Ajouter une contrainte de temps à votre projet pour que le synthétiseur détermine la fréquence maximale de votre design. Quelle est la fréquence maximale que le synthétiseur a déterminée pour votre design?